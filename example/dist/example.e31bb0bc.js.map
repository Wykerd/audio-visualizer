{"version":3,"sources":["../index.js","index.js"],"names":["AudioContext","window","webkitAudioContext","AudioVisualizer","audio","canvas","style","audioElement","audioContext","analyser","createAnalyser","track","createMediaElementSource","connect","destination","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","getByteTimeDomainData","error","console","warn","resume","Promise","resolve","sineWaveOffset","ctx","getContext","back","line","progress","lineWidth","parseInt","clicked","addEventListener","e","mousemoveHandler","touchmoveHandler","x","touches","clientX","offsetLeft","currentTime","Math","floor","duration","clientWidth","preventDefault","clickHandler","init","fillStyle","fillRect","width","height","strokeStyle","beginPath","moveTo","lineTo","stroke","pause","requestAnimationFrame","draw","sliceWidth","i","v","y","paused","modifier","random","randomLength","sin","PI","play","module","exports","require","document","querySelector","screen","audiovisualizer","btn","onclick","then","textContent"],"mappings":"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","file":"example.e31bb0bc.js","sourceRoot":"..","sourcesContent":["const AudioVisualizer = require('../index.js');\n\nconst canvas = document.querySelector('canvas');\ncanvas.width = window.screen.width\n\nconst audiovisualizer = new AudioVisualizer(document.querySelector('audio'), canvas, { back: '#1c2541', line: '#f56476', progress: 'rgba(211, 76, 85, 0.2)' });\n\nconst btn = document.querySelector('button');\nbtn.onclick = () => { audiovisualizer.audioContext.resume().then(() => { audiovisualizer.play(); audiovisualizer.draw(); }) }\n\naudiovisualizer.audioElement.addEventListener(\"play\", () => {\n    btn.onclick = () => audiovisualizer.pause();\n    btn.textContent = 'Pause'\n});\n\naudiovisualizer.audioElement.addEventListener(\"pause\", () => {\n    btn.onclick = () => audiovisualizer.play();\n    btn.textContent = 'Play'\n});","const AudioVisualizer = require('../index.js');\n\nconst canvas = document.querySelector('canvas');\ncanvas.width = window.screen.width\n\nconst audiovisualizer = new AudioVisualizer(document.querySelector('audio'), canvas, { back: '#1c2541', line: '#f56476', progress: 'rgba(211, 76, 85, 0.2)' });\n\nconst btn = document.querySelector('button');\nbtn.onclick = () => { audiovisualizer.audioContext.resume().then(() => { audiovisualizer.play(); audiovisualizer.draw(); }) }\n\naudiovisualizer.audioElement.addEventListener(\"play\", () => {\n    btn.onclick = () => audiovisualizer.pause();\n    btn.textContent = 'Pause'\n});\n\naudiovisualizer.audioElement.addEventListener(\"pause\", () => {\n    btn.onclick = () => audiovisualizer.play();\n    btn.textContent = 'Play'\n});"]}